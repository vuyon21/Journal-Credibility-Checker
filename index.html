<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>UFS Journal Credibility Checker</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
<style>
:root{--brand:#0F204B;--accent:#A71930;--removed:#8B8D8E}
*{box-sizing:border-box}
body{font-family:'Roboto',sans-serif;margin:0;background:linear-gradient(135deg,#f5f7fa,#e4e8f0);padding:20px;color:#222}
.container{max-width:960px;margin:0 auto}
header{background:#fff;border-radius:10px;padding:20px;margin-bottom:18px;box-shadow:0 4px 10px rgba(0,0,0,.06);text-align:center}
h1{color:var(--brand);margin:0 0 6px}
.card{background:#fff;padding:22px;border-radius:10px;box-shadow:0 6px 20px rgba(0,0,0,.05)}
.search-row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
input[type="text"]{flex:2;padding:14px;border:1px solid #ddd;border-radius:8px;font-size:16px}
button{padding:11px 14px;border-radius:8px;border:0;cursor:pointer;background:var(--brand);color:#fff;font-weight:600}
.small-btn{padding:9px 12px;background:var(--accent)}
.button-row{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px}
pre#journal-report{display:none;white-space:pre-wrap;background:#f8f9fa;padding:18px;border-radius:8px;border:1px solid #e4e8f0;margin-top:14px;max-height:480px;overflow:auto;font-family:monospace}
.removed-list{display:none;margin-top:14px;background:#fff;border-radius:8px;padding:12px;border:1px solid #eee;max-height:320px;overflow:auto;color:var(--removed)}
.status{margin-top:10px;text-align:center;display:none;padding:10px;border-radius:8px}
.status.loading{display:none;background:#fff3cd;color:#856404;border:1px solid #ffeaa7}
.status.error{background:#ffebee;color:#c0392b;border:1px solid #f8d7da}
.recommendation{display:none;margin-top:12px;padding:12px;border-radius:8px;font-weight:600}
.recommendation.recommended{background:#d4edda;color:#155724;border:1px solid #c3e6cb}
.recommendation.verify{background:#fff3cd;color:#856404;border:1px solid #ffeaa7}
.recommendation.not-recommended{background:#f8d7da;color:#721c24;border:1px solid #f5c6cb}
.footer{margin-top:22px;text-align:center;color:#555}
.autocomplete{position:relative;flex:1}
#autocomplete-results{position:absolute;left:0;right:0;top:100%;z-index:1000;background:#fff;border:1px solid #ddd;border-top:0;border-radius:0 0 8px 8px;display:none;max-height:200px;overflow:auto}
.autocomplete-item{padding:10px;border-bottom:1px solid #f1f1f1;cursor:pointer}
.autocomplete-item:hover{background:#f0f8ff}
@media (max-width:640px){.search-row{flex-direction:column}}
</style>
</head>
<body>
<div class="container">
<header>
<h1>UFS Journal Credibility Checker</h1>
<div style="color:#666">Evaluates journal credibility via accredited lists and real-time lookups from trusted sources</div>
</header>

<div class="card">
<div class="search-row">
<div class="autocomplete">
<input id="journal-query" type="text" placeholder="Enter journal title or ISSN (e.g. Nature or 0028-0836)">
<div id="autocomplete-results"></div>
</div>
<button id="check-btn">Check</button>
<button id="copy-report-btn" class="small-btn">üìã Copy Report</button>
<button id="download-report-btn" class="small-btn">üíæ Download Report</button>
</div>

<div class="button-row">
<button id="show-removed-btn" style="background:#6c757d">üóëÔ∏è Show Removed Journals</button>
<button id="copy-removed-btn" style="background:#da4453">üìã Copy Removed Journals</button>
</div>

<div class="status loading" id="loading-message">Loading journal data...</div>
<div class="status error" id="error-message"></div>

<pre id="journal-report"></pre>
<div id="recommendation" class="recommendation"></div>

<div id="removed-journals-list" class="removed-list"></div>

<div class="footer">Note: While this journal meets credibility checks, researchers should ensure alignment with their field of study and intended audience before submission.</div>
</div>
</div>

<script>
const $ = id => document.getElementById(id);
const journalQuery = $('journal-query');
const checkBtn = $('check-btn');
const autocompleteResults = $('autocomplete-results');
const copyReportBtn = $('copy-report-btn');
const downloadReportBtn = $('download-report-btn');
const showRemovedBtn = $('show-removed-btn');
const copyRemovedBtn = $('copy-removed-btn');
const journalReport = $('journal-report');
const removedJournalsList = $('removed-journals-list');
const loadingMessage = $('loading-message');
const errorMessage = $('error-message');
const recommendation = $('recommendation');

const RAW_BASE = 'https://raw.githubusercontent.com/vuyon21/Journal-Credibility-Checker/main/';

const FILENAMES = {
dhet:'DHET_2025.txt', doaj:'DOAJ_2025.txt', ibss:'IBSS_2025.txt', norwegian:'NORWEGIAN_2025.txt',
other:'OTHER INDEXED JOURNALS_2025.txt', scielo:'SCIELO SA_2025.txt', scopus:'SCOPUS_2025.txt', wos:'WOS_2025.txt',
removed:'JOURNALS REMOVED IN PAST YEARS.txt',
transformative:['WILEY_2025.csv','The Company of Biologists_2025.csv','Taylir & Francis_2025.csv','Springer_2025.csv','ScienceDirect (Elsevier)_2025.csv','SAGE Publishing_2025.csv','Royal Society_2025.csv','Royal Society of Chemistry Platinum_2025.csv','Oxford University Press Journals_2025.csv','IOPscienceExtra_2025.csv','Emerald_2025.csv','Cambridge University Press (CUP)_2025.csv','Bentham Science Publisherst_2025.csv','Association for Computing Machinery (ACM)_2025.csv','American Institute of Physics (AIP)_2025.csv','American Chemicals Society(ACS)_2025.csv']
};

let journalLists = {dhet:[], doaj:[], ibss:[], norwegian:[], other:[], scielo:[], scopus:[], wos:[], removed:[], transformative:[]};

/* ===================== LOAD TXT/CSV FILES ===================== */
async function fetchTextFile(fname){const res=await fetch(RAW_BASE+encodeURIComponent(fname));if(!res.ok)return[];const text=await res.text();return text.split(/\r?\n/).map(l=>l.trim()).filter(Boolean);}
async function loadAllLists(){
showLoading('Loading journal lists from GitHub...');
for(const key of ['dhet','doaj','ibss','norwegian','other','scielo','scopus','wos','removed']){
journalLists[key]=await fetchTextFile(FILENAMES[key]);
}
for(const tf of FILENAMES.transformative){
let lines = await fetchTextFile(tf);
lines = lines.map(l=>{
const parts=l.split(',');return {title:parts[0],issn:parts[1],transformative:parts[2],duration:parts[3]||'',notes:parts[4]||'',publisher:parts[0]};});
journalLists.transformative.push(...lines);
}
hideLoading();
}
loadAllLists();

/* ===================== AUTOCOMPLETE ===================== */
journalQuery.addEventListener('input',function(){
const q=journalQuery.value.toLowerCase().trim();autocompleteResults.innerHTML='';autocompleteResults.style.display='none';
if(q.length<2)return;
let suggestions=[];
for(const list of Object.values(journalLists)){
if(!Array.isArray(list))continue;
for(const j of list){
if(j.toLowerCase?.()?.includes(q) && !suggestions.includes(j.title||j))suggestions.push(j.title||j);if(suggestions.length>=8)break;
}
if(suggestions.length>=8)break;
}
if(suggestions.length){
for(const t of suggestions){
const div=document.createElement('div');div.className='autocomplete-item';div.textContent=t;
div.addEventListener('click',()=>{journalQuery.value=t;autocompleteResults.style.display='none';runCheck();});autocompleteResults.appendChild(div);
}
autocompleteResults.style.display='block';
}
});
document.addEventListener('click',e=>{if(!autocompleteResults.contains(e.target)&&e.target!==journalQuery)autocompleteResults.style.display='none';});

/* ===================== SEARCH/REPORT LOGIC ===================== */
function findOffline(query){
const q=query.toLowerCase().trim();
const flags={};let firstHit=null;
for(const [key,arr] of Object.entries(journalLists)){
if(key==='removed')continue;
flags[key]=arr.some(j=>{
let t=j.title||j;if(typeof t==='string')t=t.toLowerCase();
if(t===q||t.includes(q)){if(!firstHit)firstHit=j;return true}return false;
});
}
return {flags,sample:firstHit};
}
function checkRemoved(query){
const q=query.toLowerCase().trim();
return journalLists.removed.some(j=>j.toLowerCase().includes(q));
}

async function fetchCrossRef(titleOrISSN){try{const url=`https://api.crossref.org/journals/${encodeURIComponent(titleOrISSN)}`;const r=await fetch(url);if(!r.ok)return null;const json=await r.json();return json.message||null;}catch(e){return null;}}
async function fetchPubMed(title){try{const url=`https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?db=pubmed&term=${encodeURIComponent(title)}[journal]&retmode=json&retmax=1`;const r=await fetch(url);if(!r.ok)return 0;const j=await r.json();return j.esearchresult.count||0;}catch(e){return 0;}}
async function fetchOpenAlex(title){try{const url=`https://api.openalex.org/works?filter=venue.title:${encodeURIComponent(title)}&per-page=1`;const r=await fetch(url);if(!r.ok)return null;const j=await r.json();return j.meta?.count||null;}catch(e){return null;}}

function buildReport(query,offline,isRemoved,crossref,pubmedCount,openalex){
const f=offline.flags;const hit=offline.sample;const title=hit?.title||query;
let recText='‚ö†Ô∏è Note: While this journal meets credibility checks, researchers should ensure alignment with their field of study and intended audience before submission.';let recClass='verify';
if(f.dhet||f.scopus||f.wos)recText='‚úÖ Recommended: Appears in major credible indexes and transformative agreements if applicable.';recClass='recommended';
if(isRemoved){recText='‚ùå Not recommended: Appears on removed list';recClass='not-recommended';}
let transformativeStr='None';
const matchingTA=journalLists.transformative.filter(t=>t.title.toLowerCase()===title.toLowerCase()&&t.transformative.toLowerCase()==='yes');
if(matchingTA.length)transformativeStr='Yes ('+matchingTA.map(t=>t.publisher).join(', ')+')';
let durationStr=matchingTA.map(t=>t.duration+' - '+t.notes).join('; ');
return `
üîç Search: ${query}

üìò Journal: ${title}
üìã ISSN: ${hit?.issn||'N/A'}
üè¢ Publisher: ${hit?.publisher||crossref?.publisher||'Unknown'}
üìù License: ${crossref?.license?`[${crossref.license}](${crossref.license})`:'N/A'}
PubMed: ${pubmedCount} article(s)
OpenAlex: ${openalex||'N/A'}

================== LOCAL ACCREDITATION LISTS ==================
DHET:           ${f.dhet?'‚úÖ Found':'‚ùå Not found'}
DOAJ:           ${f.doaj?'‚úÖ Found':'‚ùå Not found'}
IBSS:           ${f.ibss?'‚úÖ Found':'‚ùå Not found'}
Norwegian:      ${f.norwegian?'‚úÖ Found':'‚ùå Not found'}
Other Indexed:  ${f.other?'‚úÖ Found':'‚ùå Not found'}
SciELO SA:      ${f.scielo?'‚úÖ Found':'‚ùå Not found'}
Scopus:         ${f.scopus?'‚úÖ Found':'‚ùå Not found'}
WOS:            ${f.wos?'‚úÖ Found':'‚ùå Not found'}

================== TRANSFORMATIVE AGREEMENTS ==================
Transformative: ${transformativeStr}
${durationStr ? 'Duration: '+durationStr : ''}

================== RECOMMENDATION ==================
${recText}
`;}

function showReportText(text,recClass){journalReport.textContent=text;journalReport.style.display='block';recommendation.textContent=recClass;recommendation.className='recommendation '+recClass;recommendation.style.display='block';}

/* ===================== MAIN CHECK ===================== */
async function runCheck(){
const query=journalQuery.value.trim();if(!query){errorMessage.textContent='Enter a journal title or ISSN';errorMessage.style.display='block';return;}
loadingMessage.style.display='block';journalReport.style.display='none';recommendation.style.display='none';
const offline=findOffline(query);const isRemoved=checkRemoved(query);
const crossref=await fetchCrossRef(query);const pubmedCount=await fetchPubMed(query);const openalex=await fetchOpenAlex(query);
loadingMessage.style.display='none';
const rep=buildReport(query,offline,isRemoved,crossref,pubmedCount,openalex);
showReportText(rep,'recommended');
}

/* ===================== BUTTONS ===================== */
checkBtn.addEventListener('click',runCheck);
journalQuery.addEventListener('keypress',e=>{if(e.key==='Enter')runCheck();});
copyReportBtn.addEventListener('click',()=>{navigator.clipboard.writeText(journalReport.textContent);alert('Report copied to clipboard');});
downloadReportBtn.addEventListener('click',()=>{const blob=new Blob([journalReport.textContent],{type:'text/plain'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download='journal_report.txt';a.click();URL.revokeObjectURL(url);});
showRemovedBtn.addEventListener('click',()=>{removedJournalsList.style.display=removedJournalsList.style.display==='block'?'none':'block';removedJournalsList.innerHTML='';if(removedJournalsList.style.display==='block'){for(const j of journalLists.removed){const d=document.createElement('div');d.textContent=j;removedJournalsList.appendChild(d);}}});
copyRemovedBtn.addEventListener('click',()=>{navigator.clipboard.writeText(journalLists.removed.join('\n'));alert('Removed journals copied to clipboard');});

</script>
</body>
</html>
